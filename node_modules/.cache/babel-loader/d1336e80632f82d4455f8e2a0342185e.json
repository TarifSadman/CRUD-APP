{"ast":null,"code":"\"use client\";\n\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport React, { useEffect } from 'react';\nimport { useMutateObserver } from '@rc-component/mutate-observer';\nimport classNames from 'classnames';\nimport { useToken } from '../theme/internal';\nimport WatermarkContext from './context';\nimport useClips, { FontGap } from './useClips';\nimport useRafDebounce from './useRafDebounce';\nimport useWatermark from './useWatermark';\nimport { getPixelRatio, reRendering } from './utils';\n/**\n * Only return `next` when size changed.\n * This is only used for elements compare, not a shallow equal!\n */\n\nfunction getSizeDiff(prev, next) {\n  return prev.size === next.size ? prev : next;\n}\n\nconst Watermark = props => {\n  var _a, _b;\n\n  const {\n    /**\n     * The antd content layer zIndex is basically below 10\n     * https://github.com/ant-design/ant-design/blob/6192403b2ce517c017f9e58a32d58774921c10cd/components/style/themes/default.less#L335\n     */\n    zIndex = 9,\n    rotate = -22,\n    width,\n    height,\n    image,\n    content,\n    font = {},\n    style,\n    className,\n    rootClassName,\n    gap = [100, 100],\n    offset,\n    children\n  } = props;\n  const [, token] = useToken();\n  const {\n    color = token.colorFill,\n    fontSize = token.fontSizeLG,\n    fontWeight = 'normal',\n    fontStyle = 'normal',\n    fontFamily = 'sans-serif'\n  } = font;\n  const [gapX, gapY] = gap;\n  const gapXCenter = gapX / 2;\n  const gapYCenter = gapY / 2;\n  const offsetLeft = (_a = offset === null || offset === void 0 ? void 0 : offset[0]) !== null && _a !== void 0 ? _a : gapXCenter;\n  const offsetTop = (_b = offset === null || offset === void 0 ? void 0 : offset[1]) !== null && _b !== void 0 ? _b : gapYCenter;\n  const markStyle = React.useMemo(() => {\n    const mergedStyle = {\n      zIndex,\n      position: 'absolute',\n      left: 0,\n      top: 0,\n      width: '100%',\n      height: '100%',\n      pointerEvents: 'none',\n      backgroundRepeat: 'repeat'\n    };\n    /** Calculate the style of the offset */\n\n    let positionLeft = offsetLeft - gapXCenter;\n    let positionTop = offsetTop - gapYCenter;\n\n    if (positionLeft > 0) {\n      mergedStyle.left = `${positionLeft}px`;\n      mergedStyle.width = `calc(100% - ${positionLeft}px)`;\n      positionLeft = 0;\n    }\n\n    if (positionTop > 0) {\n      mergedStyle.top = `${positionTop}px`;\n      mergedStyle.height = `calc(100% - ${positionTop}px)`;\n      positionTop = 0;\n    }\n\n    mergedStyle.backgroundPosition = `${positionLeft}px ${positionTop}px`;\n    return mergedStyle;\n  }, [zIndex, offsetLeft, gapXCenter, offsetTop, gapYCenter]);\n  const [container, setContainer] = React.useState(); // Used for nest case like Modal, Drawer\n\n  const [subElements, setSubElements] = React.useState(new Set()); // Nest elements should also support watermark\n\n  const targetElements = React.useMemo(() => {\n    const list = container ? [container] : [];\n    return [].concat(list, _toConsumableArray(Array.from(subElements)));\n  }, [container, subElements]); // ============================ Content =============================\n\n  /**\n   * Get the width and height of the watermark. The default values are as follows\n   * Image: [120, 64]; Content: It's calculated by content;\n   */\n\n  const getMarkSize = ctx => {\n    let defaultWidth = 120;\n    let defaultHeight = 64;\n\n    if (!image && ctx.measureText) {\n      ctx.font = `${Number(fontSize)}px ${fontFamily}`;\n      const contents = Array.isArray(content) ? content : [content];\n      const sizes = contents.map(item => {\n        const metrics = ctx.measureText(item);\n        return [metrics.width, metrics.fontBoundingBoxAscent + metrics.fontBoundingBoxDescent];\n      });\n      defaultWidth = Math.ceil(Math.max.apply(Math, _toConsumableArray(sizes.map(size => size[0]))));\n      defaultHeight = Math.ceil(Math.max.apply(Math, _toConsumableArray(sizes.map(size => size[1])))) * contents.length + (contents.length - 1) * FontGap;\n    }\n\n    return [width !== null && width !== void 0 ? width : defaultWidth, height !== null && height !== void 0 ? height : defaultHeight];\n  };\n\n  const getClips = useClips();\n  const [watermarkInfo, setWatermarkInfo] = React.useState(null); // Generate new Watermark content\n\n  const renderWatermark = () => {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n\n    if (ctx) {\n      const ratio = getPixelRatio();\n      const [markWidth, markHeight] = getMarkSize(ctx);\n\n      const drawCanvas = drawContent => {\n        const [nextClips, clipWidth] = getClips(drawContent || '', rotate, ratio, markWidth, markHeight, {\n          color,\n          fontSize,\n          fontStyle,\n          fontWeight,\n          fontFamily\n        }, gapX, gapY);\n        setWatermarkInfo([nextClips, clipWidth]);\n      };\n\n      if (image) {\n        const img = new Image();\n\n        img.onload = () => {\n          drawCanvas(img);\n        };\n\n        img.onerror = () => {\n          drawCanvas(content);\n        };\n\n        img.crossOrigin = 'anonymous';\n        img.referrerPolicy = 'no-referrer';\n        img.src = image;\n      } else {\n        drawCanvas(content);\n      }\n    }\n  };\n\n  const syncWatermark = useRafDebounce(renderWatermark); // ============================= Effect =============================\n  // Append watermark to the container\n\n  const [appendWatermark, removeWatermark, isWatermarkEle] = useWatermark(markStyle);\n  useEffect(() => {\n    if (watermarkInfo) {\n      targetElements.forEach(holder => {\n        appendWatermark(watermarkInfo[0], watermarkInfo[1], holder);\n      });\n    }\n  }, [watermarkInfo, targetElements]); // ============================ Observe =============================\n\n  const onMutate = mutations => {\n    mutations.forEach(mutation => {\n      if (reRendering(mutation, isWatermarkEle)) {\n        syncWatermark();\n      }\n    });\n  };\n\n  useMutateObserver(targetElements, onMutate);\n  useEffect(syncWatermark, [rotate, zIndex, width, height, image, content, color, fontSize, fontWeight, fontStyle, fontFamily, gapX, gapY, offsetLeft, offsetTop]); // ============================ Context =============================\n\n  const watermarkContext = React.useMemo(() => ({\n    add: ele => {\n      setSubElements(prev => {\n        const clone = new Set(prev);\n        clone.add(ele);\n        return getSizeDiff(prev, clone);\n      });\n    },\n    remove: ele => {\n      removeWatermark(ele);\n      setSubElements(prev => {\n        const clone = new Set(prev);\n        clone.delete(ele);\n        return getSizeDiff(prev, clone);\n      });\n    }\n  }), []); // ============================= Render =============================\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: setContainer,\n    className: classNames(className, rootClassName),\n    style: Object.assign({\n      position: 'relative'\n    }, style)\n  }, /*#__PURE__*/React.createElement(WatermarkContext.Provider, {\n    value: watermarkContext\n  }, children));\n};\n\nif (process.env.NODE_ENV !== 'production') {\n  Watermark.displayName = 'Watermark';\n}\n\nexport default Watermark;","map":{"version":3,"names":["_toConsumableArray","React","useEffect","useMutateObserver","classNames","useToken","WatermarkContext","useClips","FontGap","useRafDebounce","useWatermark","getPixelRatio","reRendering","getSizeDiff","prev","next","size","Watermark","props","_a","_b","zIndex","rotate","width","height","image","content","font","style","className","rootClassName","gap","offset","children","token","color","colorFill","fontSize","fontSizeLG","fontWeight","fontStyle","fontFamily","gapX","gapY","gapXCenter","gapYCenter","offsetLeft","offsetTop","markStyle","useMemo","mergedStyle","position","left","top","pointerEvents","backgroundRepeat","positionLeft","positionTop","backgroundPosition","container","setContainer","useState","subElements","setSubElements","Set","targetElements","list","concat","Array","from","getMarkSize","ctx","defaultWidth","defaultHeight","measureText","Number","contents","isArray","sizes","map","item","metrics","fontBoundingBoxAscent","fontBoundingBoxDescent","Math","ceil","max","apply","length","getClips","watermarkInfo","setWatermarkInfo","renderWatermark","canvas","document","createElement","getContext","ratio","markWidth","markHeight","drawCanvas","drawContent","nextClips","clipWidth","img","Image","onload","onerror","crossOrigin","referrerPolicy","src","syncWatermark","appendWatermark","removeWatermark","isWatermarkEle","forEach","holder","onMutate","mutations","mutation","watermarkContext","add","ele","clone","remove","delete","ref","Object","assign","Provider","value","process","env","NODE_ENV","displayName"],"sources":["/mnt/c/Users/Admin/crud-app/node_modules/antd/es/watermark/index.js"],"sourcesContent":["\"use client\";\n\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport React, { useEffect } from 'react';\nimport { useMutateObserver } from '@rc-component/mutate-observer';\nimport classNames from 'classnames';\nimport { useToken } from '../theme/internal';\nimport WatermarkContext from './context';\nimport useClips, { FontGap } from './useClips';\nimport useRafDebounce from './useRafDebounce';\nimport useWatermark from './useWatermark';\nimport { getPixelRatio, reRendering } from './utils';\n/**\n * Only return `next` when size changed.\n * This is only used for elements compare, not a shallow equal!\n */\nfunction getSizeDiff(prev, next) {\n  return prev.size === next.size ? prev : next;\n}\nconst Watermark = props => {\n  var _a, _b;\n  const {\n    /**\n     * The antd content layer zIndex is basically below 10\n     * https://github.com/ant-design/ant-design/blob/6192403b2ce517c017f9e58a32d58774921c10cd/components/style/themes/default.less#L335\n     */\n    zIndex = 9,\n    rotate = -22,\n    width,\n    height,\n    image,\n    content,\n    font = {},\n    style,\n    className,\n    rootClassName,\n    gap = [100, 100],\n    offset,\n    children\n  } = props;\n  const [, token] = useToken();\n  const {\n    color = token.colorFill,\n    fontSize = token.fontSizeLG,\n    fontWeight = 'normal',\n    fontStyle = 'normal',\n    fontFamily = 'sans-serif'\n  } = font;\n  const [gapX, gapY] = gap;\n  const gapXCenter = gapX / 2;\n  const gapYCenter = gapY / 2;\n  const offsetLeft = (_a = offset === null || offset === void 0 ? void 0 : offset[0]) !== null && _a !== void 0 ? _a : gapXCenter;\n  const offsetTop = (_b = offset === null || offset === void 0 ? void 0 : offset[1]) !== null && _b !== void 0 ? _b : gapYCenter;\n  const markStyle = React.useMemo(() => {\n    const mergedStyle = {\n      zIndex,\n      position: 'absolute',\n      left: 0,\n      top: 0,\n      width: '100%',\n      height: '100%',\n      pointerEvents: 'none',\n      backgroundRepeat: 'repeat'\n    };\n    /** Calculate the style of the offset */\n    let positionLeft = offsetLeft - gapXCenter;\n    let positionTop = offsetTop - gapYCenter;\n    if (positionLeft > 0) {\n      mergedStyle.left = `${positionLeft}px`;\n      mergedStyle.width = `calc(100% - ${positionLeft}px)`;\n      positionLeft = 0;\n    }\n    if (positionTop > 0) {\n      mergedStyle.top = `${positionTop}px`;\n      mergedStyle.height = `calc(100% - ${positionTop}px)`;\n      positionTop = 0;\n    }\n    mergedStyle.backgroundPosition = `${positionLeft}px ${positionTop}px`;\n    return mergedStyle;\n  }, [zIndex, offsetLeft, gapXCenter, offsetTop, gapYCenter]);\n  const [container, setContainer] = React.useState();\n  // Used for nest case like Modal, Drawer\n  const [subElements, setSubElements] = React.useState(new Set());\n  // Nest elements should also support watermark\n  const targetElements = React.useMemo(() => {\n    const list = container ? [container] : [];\n    return [].concat(list, _toConsumableArray(Array.from(subElements)));\n  }, [container, subElements]);\n  // ============================ Content =============================\n  /**\n   * Get the width and height of the watermark. The default values are as follows\n   * Image: [120, 64]; Content: It's calculated by content;\n   */\n  const getMarkSize = ctx => {\n    let defaultWidth = 120;\n    let defaultHeight = 64;\n    if (!image && ctx.measureText) {\n      ctx.font = `${Number(fontSize)}px ${fontFamily}`;\n      const contents = Array.isArray(content) ? content : [content];\n      const sizes = contents.map(item => {\n        const metrics = ctx.measureText(item);\n        return [metrics.width, metrics.fontBoundingBoxAscent + metrics.fontBoundingBoxDescent];\n      });\n      defaultWidth = Math.ceil(Math.max.apply(Math, _toConsumableArray(sizes.map(size => size[0]))));\n      defaultHeight = Math.ceil(Math.max.apply(Math, _toConsumableArray(sizes.map(size => size[1])))) * contents.length + (contents.length - 1) * FontGap;\n    }\n    return [width !== null && width !== void 0 ? width : defaultWidth, height !== null && height !== void 0 ? height : defaultHeight];\n  };\n  const getClips = useClips();\n  const [watermarkInfo, setWatermarkInfo] = React.useState(null);\n  // Generate new Watermark content\n  const renderWatermark = () => {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    if (ctx) {\n      const ratio = getPixelRatio();\n      const [markWidth, markHeight] = getMarkSize(ctx);\n      const drawCanvas = drawContent => {\n        const [nextClips, clipWidth] = getClips(drawContent || '', rotate, ratio, markWidth, markHeight, {\n          color,\n          fontSize,\n          fontStyle,\n          fontWeight,\n          fontFamily\n        }, gapX, gapY);\n        setWatermarkInfo([nextClips, clipWidth]);\n      };\n      if (image) {\n        const img = new Image();\n        img.onload = () => {\n          drawCanvas(img);\n        };\n        img.onerror = () => {\n          drawCanvas(content);\n        };\n        img.crossOrigin = 'anonymous';\n        img.referrerPolicy = 'no-referrer';\n        img.src = image;\n      } else {\n        drawCanvas(content);\n      }\n    }\n  };\n  const syncWatermark = useRafDebounce(renderWatermark);\n  // ============================= Effect =============================\n  // Append watermark to the container\n  const [appendWatermark, removeWatermark, isWatermarkEle] = useWatermark(markStyle);\n  useEffect(() => {\n    if (watermarkInfo) {\n      targetElements.forEach(holder => {\n        appendWatermark(watermarkInfo[0], watermarkInfo[1], holder);\n      });\n    }\n  }, [watermarkInfo, targetElements]);\n  // ============================ Observe =============================\n  const onMutate = mutations => {\n    mutations.forEach(mutation => {\n      if (reRendering(mutation, isWatermarkEle)) {\n        syncWatermark();\n      }\n    });\n  };\n  useMutateObserver(targetElements, onMutate);\n  useEffect(syncWatermark, [rotate, zIndex, width, height, image, content, color, fontSize, fontWeight, fontStyle, fontFamily, gapX, gapY, offsetLeft, offsetTop]);\n  // ============================ Context =============================\n  const watermarkContext = React.useMemo(() => ({\n    add: ele => {\n      setSubElements(prev => {\n        const clone = new Set(prev);\n        clone.add(ele);\n        return getSizeDiff(prev, clone);\n      });\n    },\n    remove: ele => {\n      removeWatermark(ele);\n      setSubElements(prev => {\n        const clone = new Set(prev);\n        clone.delete(ele);\n        return getSizeDiff(prev, clone);\n      });\n    }\n  }), []);\n  // ============================= Render =============================\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: setContainer,\n    className: classNames(className, rootClassName),\n    style: Object.assign({\n      position: 'relative'\n    }, style)\n  }, /*#__PURE__*/React.createElement(WatermarkContext.Provider, {\n    value: watermarkContext\n  }, children));\n};\nif (process.env.NODE_ENV !== 'production') {\n  Watermark.displayName = 'Watermark';\n}\nexport default Watermark;"],"mappings":"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"},"metadata":{},"sourceType":"module"}