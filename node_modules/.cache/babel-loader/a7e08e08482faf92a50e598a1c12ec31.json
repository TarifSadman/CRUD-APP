{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { useContext } from '@rc-component/context';\nimport classNames from 'classnames';\nimport VirtualList from 'rc-virtual-list';\nimport * as React from 'react';\nimport Cell from \"../Cell\";\nimport TableContext, { responseImmutable } from \"../context/TableContext\";\nimport useFlattenRecords from \"../hooks/useFlattenRecords\";\nimport BodyLine from \"./BodyLine\";\nimport { GridContext, StaticContext } from \"./context\";\nvar Grid = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var data = props.data,\n      onScroll = props.onScroll;\n\n  var _useContext = useContext(TableContext, ['flattenColumns', 'onColumnResize', 'getRowKey', 'prefixCls', 'expandedKeys', 'childrenColumnName', 'emptyNode', 'scrollX']),\n      flattenColumns = _useContext.flattenColumns,\n      onColumnResize = _useContext.onColumnResize,\n      getRowKey = _useContext.getRowKey,\n      expandedKeys = _useContext.expandedKeys,\n      prefixCls = _useContext.prefixCls,\n      childrenColumnName = _useContext.childrenColumnName,\n      emptyNode = _useContext.emptyNode,\n      scrollX = _useContext.scrollX;\n\n  var _useContext2 = useContext(StaticContext),\n      scrollY = _useContext2.scrollY,\n      listItemHeight = _useContext2.listItemHeight; // =========================== Ref ============================\n\n\n  var listRef = React.useRef(); // =========================== Data ===========================\n\n  var flattenData = useFlattenRecords(data, childrenColumnName, expandedKeys, getRowKey); // ========================== Column ==========================\n\n  var columnsWidth = React.useMemo(function () {\n    var total = 0;\n    return flattenColumns.map(function (_ref) {\n      var width = _ref.width,\n          key = _ref.key;\n      total += width;\n      return [key, width, total];\n    });\n  }, [flattenColumns]);\n  var columnsOffset = React.useMemo(function () {\n    return columnsWidth.map(function (colWidth) {\n      return colWidth[2];\n    });\n  }, [columnsWidth]);\n  React.useEffect(function () {\n    columnsWidth.forEach(function (_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 2),\n          key = _ref3[0],\n          width = _ref3[1];\n\n      onColumnResize(key, width);\n    });\n  }, [columnsWidth]); // =========================== Ref ============================\n\n  React.useImperativeHandle(ref, function () {\n    var obj = {};\n    Object.defineProperty(obj, 'scrollLeft', {\n      get: function get() {\n        var _listRef$current;\n\n        return ((_listRef$current = listRef.current) === null || _listRef$current === void 0 ? void 0 : _listRef$current.getScrollInfo().x) || 0;\n      },\n      set: function set(value) {\n        var _listRef$current2;\n\n        (_listRef$current2 = listRef.current) === null || _listRef$current2 === void 0 ? void 0 : _listRef$current2.scrollTo({\n          left: value\n        });\n      }\n    });\n    return obj;\n  }); // ======================= Col/Row Span =======================\n\n  var getRowSpan = function getRowSpan(column, index) {\n    var _flattenData$index;\n\n    var record = (_flattenData$index = flattenData[index]) === null || _flattenData$index === void 0 ? void 0 : _flattenData$index.record;\n    var onCell = column.onCell;\n\n    if (onCell) {\n      var _cellProps$rowSpan;\n\n      var cellProps = onCell(record, index);\n      return (_cellProps$rowSpan = cellProps === null || cellProps === void 0 ? void 0 : cellProps.rowSpan) !== null && _cellProps$rowSpan !== void 0 ? _cellProps$rowSpan : 1;\n    }\n\n    return 1;\n  };\n\n  var extraRender = function extraRender(info) {\n    var start = info.start,\n        end = info.end,\n        getSize = info.getSize,\n        offsetY = info.offsetY; // Do nothing if no data\n\n    if (end < 0) {\n      return null;\n    } // Find first rowSpan column\n\n\n    var firstRowSpanColumns = flattenColumns.filter( // rowSpan is 0\n    function (column) {\n      return getRowSpan(column, start) === 0;\n    });\n    var startIndex = start;\n\n    var _loop = function _loop(i) {\n      firstRowSpanColumns = firstRowSpanColumns.filter(function (column) {\n        return getRowSpan(column, i) === 0;\n      });\n\n      if (!firstRowSpanColumns.length) {\n        startIndex = i;\n        return \"break\";\n      }\n    };\n\n    for (var i = start; i >= 0; i -= 1) {\n      var _ret = _loop(i);\n\n      if (_ret === \"break\") break;\n    } // Find last rowSpan column\n\n\n    var lastRowSpanColumns = flattenColumns.filter( // rowSpan is not 1\n    function (column) {\n      return getRowSpan(column, end) !== 1;\n    });\n    var endIndex = end;\n\n    var _loop2 = function _loop2(_i) {\n      lastRowSpanColumns = lastRowSpanColumns.filter(function (column) {\n        return getRowSpan(column, _i) !== 1;\n      });\n\n      if (!lastRowSpanColumns.length) {\n        endIndex = Math.max(_i - 1, end);\n        return \"break\";\n      }\n    };\n\n    for (var _i = end; _i < flattenData.length; _i += 1) {\n      var _ret2 = _loop2(_i);\n\n      if (_ret2 === \"break\") break;\n    } // Collect the line who has rowSpan\n\n\n    var spanLines = [];\n\n    var _loop3 = function _loop3(_i2) {\n      var item = flattenData[_i2]; // This code will never reach, just incase\n\n      if (!item) {\n        return \"continue\";\n      }\n\n      if (flattenColumns.some(function (column) {\n        return getRowSpan(column, _i2) > 1;\n      })) {\n        spanLines.push(_i2);\n      }\n    };\n\n    for (var _i2 = startIndex; _i2 <= endIndex; _i2 += 1) {\n      var _ret3 = _loop3(_i2);\n\n      if (_ret3 === \"continue\") continue;\n    } // Patch extra line on the page\n\n\n    var nodes = spanLines.map(function (index) {\n      var item = flattenData[index];\n      var rowKey = getRowKey(item.record, index);\n\n      var getHeight = function getHeight(rowSpan) {\n        var endItemIndex = index + rowSpan - 1;\n        var endItemKey = getRowKey(flattenData[endItemIndex].record, endItemIndex);\n        var sizeInfo = getSize(rowKey, endItemKey);\n        return sizeInfo.bottom - sizeInfo.top;\n      };\n\n      var sizeInfo = getSize(rowKey);\n      return /*#__PURE__*/React.createElement(BodyLine, {\n        key: index,\n        data: item,\n        rowKey: rowKey,\n        index: index,\n        style: {\n          top: -offsetY + sizeInfo.top\n        },\n        extra: true,\n        getHeight: getHeight\n      });\n    });\n    return nodes;\n  }; // ========================= Context ==========================\n\n\n  var gridContext = React.useMemo(function () {\n    return {\n      columnsOffset: columnsOffset\n    };\n  }, [columnsOffset]); // ========================== Render ==========================\n\n  var tblPrefixCls = \"\".concat(prefixCls, \"-tbody\");\n  var bodyContent;\n\n  if (flattenData.length) {\n    bodyContent = /*#__PURE__*/React.createElement(VirtualList, {\n      fullHeight: false,\n      ref: listRef,\n      className: classNames(tblPrefixCls, \"\".concat(tblPrefixCls, \"-virtual\")),\n      height: scrollY,\n      itemHeight: listItemHeight || 24,\n      data: flattenData,\n      itemKey: function itemKey(item) {\n        return getRowKey(item.record);\n      },\n      scrollWidth: scrollX,\n      onVirtualScroll: function onVirtualScroll(_ref4) {\n        var x = _ref4.x;\n        onScroll({\n          scrollLeft: x\n        });\n      },\n      extraRender: extraRender\n    }, function (item, index, itemProps) {\n      var rowKey = getRowKey(item.record, index);\n      return /*#__PURE__*/React.createElement(BodyLine, _extends({\n        data: item,\n        rowKey: rowKey,\n        index: index\n      }, itemProps));\n    });\n  } else {\n    bodyContent = /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(\"\".concat(prefixCls, \"-placeholder\"))\n    }, /*#__PURE__*/React.createElement(Cell, {\n      component: \"div\",\n      prefixCls: prefixCls\n    }, emptyNode));\n  }\n\n  return /*#__PURE__*/React.createElement(GridContext.Provider, {\n    value: gridContext\n  }, bodyContent);\n});\nvar ResponseGrid = responseImmutable(Grid);\n\nif (process.env.NODE_ENV !== 'production') {\n  ResponseGrid.displayName = 'ResponseGrid';\n}\n\nexport default ResponseGrid;","map":{"version":3,"names":["_extends","_slicedToArray","useContext","classNames","VirtualList","React","Cell","TableContext","responseImmutable","useFlattenRecords","BodyLine","GridContext","StaticContext","Grid","forwardRef","props","ref","data","onScroll","_useContext","flattenColumns","onColumnResize","getRowKey","expandedKeys","prefixCls","childrenColumnName","emptyNode","scrollX","_useContext2","scrollY","listItemHeight","listRef","useRef","flattenData","columnsWidth","useMemo","total","map","_ref","width","key","columnsOffset","colWidth","useEffect","forEach","_ref2","_ref3","useImperativeHandle","obj","Object","defineProperty","get","_listRef$current","current","getScrollInfo","x","set","value","_listRef$current2","scrollTo","left","getRowSpan","column","index","_flattenData$index","record","onCell","_cellProps$rowSpan","cellProps","rowSpan","extraRender","info","start","end","getSize","offsetY","firstRowSpanColumns","filter","startIndex","_loop","i","length","_ret","lastRowSpanColumns","endIndex","_loop2","_i","Math","max","_ret2","spanLines","_loop3","_i2","item","some","push","_ret3","nodes","rowKey","getHeight","endItemIndex","endItemKey","sizeInfo","bottom","top","createElement","style","extra","gridContext","tblPrefixCls","concat","bodyContent","fullHeight","className","height","itemHeight","itemKey","scrollWidth","onVirtualScroll","_ref4","scrollLeft","itemProps","component","Provider","ResponseGrid","process","env","NODE_ENV","displayName"],"sources":["/mnt/c/Users/Admin/crud-app/node_modules/rc-table/es/VirtualTable/BodyGrid.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { useContext } from '@rc-component/context';\nimport classNames from 'classnames';\nimport VirtualList from 'rc-virtual-list';\nimport * as React from 'react';\nimport Cell from \"../Cell\";\nimport TableContext, { responseImmutable } from \"../context/TableContext\";\nimport useFlattenRecords from \"../hooks/useFlattenRecords\";\nimport BodyLine from \"./BodyLine\";\nimport { GridContext, StaticContext } from \"./context\";\nvar Grid = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var data = props.data,\n    onScroll = props.onScroll;\n  var _useContext = useContext(TableContext, ['flattenColumns', 'onColumnResize', 'getRowKey', 'prefixCls', 'expandedKeys', 'childrenColumnName', 'emptyNode', 'scrollX']),\n    flattenColumns = _useContext.flattenColumns,\n    onColumnResize = _useContext.onColumnResize,\n    getRowKey = _useContext.getRowKey,\n    expandedKeys = _useContext.expandedKeys,\n    prefixCls = _useContext.prefixCls,\n    childrenColumnName = _useContext.childrenColumnName,\n    emptyNode = _useContext.emptyNode,\n    scrollX = _useContext.scrollX;\n  var _useContext2 = useContext(StaticContext),\n    scrollY = _useContext2.scrollY,\n    listItemHeight = _useContext2.listItemHeight;\n\n  // =========================== Ref ============================\n  var listRef = React.useRef();\n\n  // =========================== Data ===========================\n  var flattenData = useFlattenRecords(data, childrenColumnName, expandedKeys, getRowKey);\n\n  // ========================== Column ==========================\n  var columnsWidth = React.useMemo(function () {\n    var total = 0;\n    return flattenColumns.map(function (_ref) {\n      var width = _ref.width,\n        key = _ref.key;\n      total += width;\n      return [key, width, total];\n    });\n  }, [flattenColumns]);\n  var columnsOffset = React.useMemo(function () {\n    return columnsWidth.map(function (colWidth) {\n      return colWidth[2];\n    });\n  }, [columnsWidth]);\n  React.useEffect(function () {\n    columnsWidth.forEach(function (_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 2),\n        key = _ref3[0],\n        width = _ref3[1];\n      onColumnResize(key, width);\n    });\n  }, [columnsWidth]);\n\n  // =========================== Ref ============================\n  React.useImperativeHandle(ref, function () {\n    var obj = {};\n    Object.defineProperty(obj, 'scrollLeft', {\n      get: function get() {\n        var _listRef$current;\n        return ((_listRef$current = listRef.current) === null || _listRef$current === void 0 ? void 0 : _listRef$current.getScrollInfo().x) || 0;\n      },\n      set: function set(value) {\n        var _listRef$current2;\n        (_listRef$current2 = listRef.current) === null || _listRef$current2 === void 0 ? void 0 : _listRef$current2.scrollTo({\n          left: value\n        });\n      }\n    });\n    return obj;\n  });\n\n  // ======================= Col/Row Span =======================\n  var getRowSpan = function getRowSpan(column, index) {\n    var _flattenData$index;\n    var record = (_flattenData$index = flattenData[index]) === null || _flattenData$index === void 0 ? void 0 : _flattenData$index.record;\n    var onCell = column.onCell;\n    if (onCell) {\n      var _cellProps$rowSpan;\n      var cellProps = onCell(record, index);\n      return (_cellProps$rowSpan = cellProps === null || cellProps === void 0 ? void 0 : cellProps.rowSpan) !== null && _cellProps$rowSpan !== void 0 ? _cellProps$rowSpan : 1;\n    }\n    return 1;\n  };\n  var extraRender = function extraRender(info) {\n    var start = info.start,\n      end = info.end,\n      getSize = info.getSize,\n      offsetY = info.offsetY;\n\n    // Do nothing if no data\n    if (end < 0) {\n      return null;\n    }\n\n    // Find first rowSpan column\n    var firstRowSpanColumns = flattenColumns.filter(\n    // rowSpan is 0\n    function (column) {\n      return getRowSpan(column, start) === 0;\n    });\n    var startIndex = start;\n    var _loop = function _loop(i) {\n      firstRowSpanColumns = firstRowSpanColumns.filter(function (column) {\n        return getRowSpan(column, i) === 0;\n      });\n      if (!firstRowSpanColumns.length) {\n        startIndex = i;\n        return \"break\";\n      }\n    };\n    for (var i = start; i >= 0; i -= 1) {\n      var _ret = _loop(i);\n      if (_ret === \"break\") break;\n    }\n\n    // Find last rowSpan column\n    var lastRowSpanColumns = flattenColumns.filter(\n    // rowSpan is not 1\n    function (column) {\n      return getRowSpan(column, end) !== 1;\n    });\n    var endIndex = end;\n    var _loop2 = function _loop2(_i) {\n      lastRowSpanColumns = lastRowSpanColumns.filter(function (column) {\n        return getRowSpan(column, _i) !== 1;\n      });\n      if (!lastRowSpanColumns.length) {\n        endIndex = Math.max(_i - 1, end);\n        return \"break\";\n      }\n    };\n    for (var _i = end; _i < flattenData.length; _i += 1) {\n      var _ret2 = _loop2(_i);\n      if (_ret2 === \"break\") break;\n    }\n\n    // Collect the line who has rowSpan\n    var spanLines = [];\n    var _loop3 = function _loop3(_i2) {\n      var item = flattenData[_i2];\n\n      // This code will never reach, just incase\n      if (!item) {\n        return \"continue\";\n      }\n      if (flattenColumns.some(function (column) {\n        return getRowSpan(column, _i2) > 1;\n      })) {\n        spanLines.push(_i2);\n      }\n    };\n    for (var _i2 = startIndex; _i2 <= endIndex; _i2 += 1) {\n      var _ret3 = _loop3(_i2);\n      if (_ret3 === \"continue\") continue;\n    }\n\n    // Patch extra line on the page\n    var nodes = spanLines.map(function (index) {\n      var item = flattenData[index];\n      var rowKey = getRowKey(item.record, index);\n      var getHeight = function getHeight(rowSpan) {\n        var endItemIndex = index + rowSpan - 1;\n        var endItemKey = getRowKey(flattenData[endItemIndex].record, endItemIndex);\n        var sizeInfo = getSize(rowKey, endItemKey);\n        return sizeInfo.bottom - sizeInfo.top;\n      };\n      var sizeInfo = getSize(rowKey);\n      return /*#__PURE__*/React.createElement(BodyLine, {\n        key: index,\n        data: item,\n        rowKey: rowKey,\n        index: index,\n        style: {\n          top: -offsetY + sizeInfo.top\n        },\n        extra: true,\n        getHeight: getHeight\n      });\n    });\n    return nodes;\n  };\n\n  // ========================= Context ==========================\n  var gridContext = React.useMemo(function () {\n    return {\n      columnsOffset: columnsOffset\n    };\n  }, [columnsOffset]);\n\n  // ========================== Render ==========================\n  var tblPrefixCls = \"\".concat(prefixCls, \"-tbody\");\n  var bodyContent;\n  if (flattenData.length) {\n    bodyContent = /*#__PURE__*/React.createElement(VirtualList, {\n      fullHeight: false,\n      ref: listRef,\n      className: classNames(tblPrefixCls, \"\".concat(tblPrefixCls, \"-virtual\")),\n      height: scrollY,\n      itemHeight: listItemHeight || 24,\n      data: flattenData,\n      itemKey: function itemKey(item) {\n        return getRowKey(item.record);\n      },\n      scrollWidth: scrollX,\n      onVirtualScroll: function onVirtualScroll(_ref4) {\n        var x = _ref4.x;\n        onScroll({\n          scrollLeft: x\n        });\n      },\n      extraRender: extraRender\n    }, function (item, index, itemProps) {\n      var rowKey = getRowKey(item.record, index);\n      return /*#__PURE__*/React.createElement(BodyLine, _extends({\n        data: item,\n        rowKey: rowKey,\n        index: index\n      }, itemProps));\n    });\n  } else {\n    bodyContent = /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(\"\".concat(prefixCls, \"-placeholder\"))\n    }, /*#__PURE__*/React.createElement(Cell, {\n      component: \"div\",\n      prefixCls: prefixCls\n    }, emptyNode));\n  }\n  return /*#__PURE__*/React.createElement(GridContext.Provider, {\n    value: gridContext\n  }, bodyContent);\n});\nvar ResponseGrid = responseImmutable(Grid);\nif (process.env.NODE_ENV !== 'production') {\n  ResponseGrid.displayName = 'ResponseGrid';\n}\nexport default ResponseGrid;"],"mappings":"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"},"metadata":{},"sourceType":"module"}